# echo服务器
echo服务器使用阻塞IO
客户端发送大数据会死锁

原因:
大数据会使服务器的内核缓冲区占满，不再接收数据，而服务器又不发送数据,导致死锁

解决(想到的):
1. 添加header，让服务器提前做好准备，开辟对应大小的缓冲区
2. 添加客户端数据一次发送的上限
3. 缓冲区满就先发送一部分给客户端

# tcp自连接
源ip和目的ip都是localhost，源端口和目的端口一致

原因:
当socket调用connect()，os会分配一个临时端口号N(连接失败就尝试N+1号端口)
分配完端口发送SYN，如果没有响应或拒绝连接，os会重新申请端口号(N+1)
直到连接完成，当临时端口号和源端口号一样时，连接建立

解决(想到的):
1. 加判断条件，得到端口号进行判断

2. 设置临时端口号的范围(修改/etc/sysctl.conf net.ipv4.ip_local_range)
比如设置为32768-65535，源端口号选择32768一下的端口即可